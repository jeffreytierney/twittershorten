(function(){window.BITLY={user:"twittershorten",key:"R_bcfdce1ff4c58e5f6426cc312e2c0899",checkKey:function(){var a=jQuery("#bitly_twitter_shorten_script");if(a.length){a=a.attr("src");if(a.indexOf("?")>-1){a=a.substring(a.indexOf("?")+1);a=a.split("&");for(var b={},c=a.length;c;){var e=a[--c].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}if(b.user&&b.key){BITLY.user=b.user;BITLY.key=b.key}}}},shortenLink:function(a,b){jQuery.getJSON("http://api.bit.ly/v3/shorten?longUrl="+encodeURIComponent(a)+
"&login="+BITLY.user+"&apiKey="+BITLY.key+"&callback=?",b)},shorten:function(){jQuery("textarea").each(function(a,b){$(b).val()!=""&&BITLY.shortenAllLinks($(b))})},shortenAllLinks:function(a){var b=(a.val()+" ").match(RegExp("(http[s]*://[^ ]+)","gi"));if(b&&b.length)for(var c=0,e=b.length;c<e;c++)(function(f){BITLY.shortenLink(f,function(d){d&&d.data&&!d.errorCode&&d.data.long_url==f&&d.data.url&&a.val(a.val().replace(f,d.data.url))})})(b[c]);return this}};BITLY.checkKey();BITLY.shorten()})();